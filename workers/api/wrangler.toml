# Cloudflare Workers configuration for Avis Fleet API
name = "avis-fleet-api"
main = "src/index.js"
compatibility_date = "2024-01-01"

# D1 Database binding
[[d1_databases]]
binding = "DB"
database_name = "avis-fleet-db"
database_id = "419bed2e-153e-45f6-bd7b-8a815a772a7f"

# R2 Bucket binding
[[r2_buckets]]
binding = "BUCKET"
bucket_name = "avis-fleet-uploads"

# Environment variables
[vars]
ENVIRONMENT = "production"
CORS_ORIGIN = "https://avis-fleet.pages.dev"

# Development settings
[env.dev]
name = "avis-fleet-api-dev"

[[env.dev.d1_databases]]
binding = "DB"
database_name = "avis-fleet-db"
database_id = "419bed2e-153e-45f6-bd7b-8a815a772a7f"

[[env.dev.r2_buckets]]
binding = "BUCKET"
bucket_name = "avis-fleet-uploads"

[env.dev.vars]
ENVIRONMENT = "development"
CORS_ORIGIN = "*"

# Preview/staging settings
[env.preview]
name = "avis-fleet-api-preview"
[env.preview.vars]
ENVIRONMENT = "preview"
CORS_ORIGIN = "*"
